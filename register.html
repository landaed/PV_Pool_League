<!DOCTYPE html>
<html lang="en">
	<head>
		<title>PV Pool League - Register</title>
		<link rel="icon" href="./assets/favicon_io/favicon.ico" type="image/x-icon" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="stylesheet" href="./assets/css/main.css"/>
		<noscript><link rel="stylesheet" href="./assets/css/noscript.css" /></noscript>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
		<script src="https://cdn.babylonjs.com/babylon.js"></script>
		<script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
		<script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
		<script src="assets\js\header_icon_move.js"></script>
	</head>

	<body>
		<div id="navBar" style=" position: fixed; top: 0; width: 100%; background: #333; /* Your styling here */">
		<!-- Your logo and navigation items -->
			<a href="index.html"><img src="assets\images\PV-Pool-League.png" alt="Logo" id="navBar_img"></a>
		</div>
		<!--a href="index.html" id="scrolling-header-logo">
				<img src="./assets/images/pool_logo.png" alt="PV Pool League Logo">
		</a-->
		<!-- Wrapper -->
		<div class="outer-wrapper">

			<!-- Main -->
			<section id="main" class="wrapper">

				<div>
					<h1 class="major1">Register</h1>
					<form id="poolLeagueSignupForm" action="./php/submit_form.php" method="post">
						<table class="formBlockSurveyTable">
							<tbody>
								<tr>
									<td class="question"><label for="teamName">Team Name<span class="required">*</span></label></td>
									<td><input name="teamName" id="teamName" type="text" required></td>
								</tr>
								<tr>
									<td class="question"><label for="dayDivision">DAY / DIVISION</label></td>
									<td><input name="dayDivision" id="dayDivision" type="text"></td>
								</tr>
								<tr>
									<td class="question"><label for="homeBarFirst">Home Bar 1st Pick</label></td>
									<td><input name="homeBarFirst" id="homeBarFirst" type="text"></td>
								</tr>
								<tr>
									<td class="question"><label for="homeBarSecond">Home Bar 2nd Pick</label></td>
									<td><input name="homeBarSecond" id="homeBarSecond" type="text"></td>
								</tr>
							</tbody>
							<tbody id="playerRows">
								<tr>
									<td class="question"><button type="button" onclick="addPlayer()">Add Player</button></td>
									<td class="question"><button type="button" onclick="removePlayer()">Remove Player</button></td>
								</tr>
								<!-- Players will be dynamically inserted here -->
							</tbody>
							<tbody>
								<tr>
									<td class="question"><label id="captchaQuestion">CAPTCHA Question</label></td>
									<td><input name="captchaAnswer" id="captchaAnswer" type="text" required></td>
								</tr>
								<tr>
									<td></td>
									<td><input class="formBlockSubmitButton" type="submit" value="Submit"></td>
								</tr>
							</tbody>
						</table>
						
					</form>
				</div>
				
				
			</section>


		<!-- Footer -->
		<footer id="footer">
			<div class="inner">
				<p>&copy; A division of Landa Investments ltd.</p>
				<p>&copy; Unbounded Research And Development Corp. All rights reserved.</p>
			</div>
		</footer>

		<!-- Scripts -->
		<script>
			let playerCount = 0;
		
			function addPlayer() {
				playerCount++;
				const tbody = document.getElementById('playerRows');
				if(playerCount>1){
					//tbody.deleteRow(playerCount-1);
				}
				
				const row = tbody.insertRow(-1); // Insert a new row at the end of the tbody
				let cell1 = row.insertCell(0);
				let cell2 = row.insertCell(1);
				let cell3 = row.insertCell(2);
				let is_captain = "(Captain)";
				if(playerCount == 1){
					cell1.innerHTML = `<label for="player${playerCount}_name">**${is_captain} ${playerCount} Name:</label><input type="text" name="player${playerCount}_name" required>`;
					cell2.innerHTML = `<label for="player${playerCount}_email">**${is_captain} Player ${playerCount} Email:</label><input type="email" name="player${playerCount}_email" required>`;
					cell3.innerHTML = `<label for="player${playerCount}_phone">**${is_captain} Player ${playerCount} Phone:</label><input type="text" name="player${playerCount}_phone" required>`;
				}
				else{
					cell1.innerHTML = `<label for="player${playerCount}_name">*Player ${playerCount} Name:</label><input type="text" name="player${playerCount}_name" required>`;
					cell2.innerHTML = `<label for="player${playerCount}_email">Player ${playerCount} Email:</label><input type="email" name="player${playerCount}_email">`;
					cell3.innerHTML = `<label for="player${playerCount}_phone">Player ${playerCount} Phone:</label><input type="text" name="player${playerCount}_phone">`;
				}
			}

			function removePlayer() {
				
				const tbody = document.getElementById('playerRows');
				if(playerCount>1){
					tbody.deleteRow(playerCount);
					playerCount--;
				}
				
			}
		
		
			document.addEventListener('DOMContentLoaded', function() {
				addPlayer(); // Automatically add the first player (Captain) on load
			});
		</script>
		
		
		<script>
		document.addEventListener('DOMContentLoaded', function() {
			var form = document.getElementById('poolLeagueSignupForm');
			var captchaQuestion = document.getElementById('captchaQuestion');
			var captchaAnswer = document.getElementById('captchaAnswer');

			function generateCaptcha() {
				var num1 = Math.floor(Math.random() * 10) + 1; // Random number between 1 and 10
				var num2 = Math.floor(Math.random() * 10) + 1; // Random number between 1 and 10
				captchaQuestion.textContent = `What is ${num1} + ${num2}?`;
				captchaAnswer.dataset.correctAnswer = num1 + num2;
			}

			// Run the CAPTCHA generator when the page loads
			generateCaptcha();

    		form.onsubmit = function(event) {
				var isValid = true;

				// Existing validation code here...

				// Email validation
				var email = document.getElementById('captainEmail');
				if (!email.value.includes('@')) {
					alert('Please enter a valid email address.');
					isValid = false;
				}

				// Phone number validation
				var phone = document.getElementById('captainPhone');
				if (!/^\d+$/.test(phone.value)) {
					alert('Phone number should contain only digits.');
					isValid = false;
				}

				// Captain name validation
				var name = document.getElementById('captainName');
				if (/[^a-zA-Z\s]/.test(name.value)) {
					alert('Captain name should contain only letters and spaces.');
					isValid = false;
				}

				// CAPTCHA validation
				if (parseInt(captchaAnswer.value) !== parseInt(captchaAnswer.dataset.correctAnswer)) {
					alert('Incorrect CAPTCHA answer. Please try again.');
					isValid = false;
				}

				if (!isValid) {
					event.preventDefault(); // Prevent form submission
				}
    		};
		});
	
</script>

		<script src="./assets/js/jquery.min.js"></script>
		<script src="./assets/js/jquery.scrollex.min.js"></script>
		<script src="./assets/js/jquery.scrolly.min.js"></script>
		<script src="./assets/js/browser.min.js"></script>
		<script src="./assets/js/breakpoints.min.js"></script>
		<script src="./assets/js/util.js"></script>
		<script src="./assets/js/main.js"></script>
		<script src="./assets/js/hamburger.js"></script>
		<script src="./assets/js/touch_screen_canvas.js"></script>
		<div class="floating-menu-container">
		<div class="floating-hamburger-menu">
				<i class="fas fa-bars"></i>
		</div>
		<nav class="floating-menu-content">
				<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="about.html">About</a></li>
						<li><a href="locations.html">Locations</a></li>
						<li><a href="divisions.html">Divisions</a></li>
						<li><a href="register.html">Register</a></li>
						<li><a href="https://compusport.ca/CS/GeneralSearch/Index/11023?callFromHomePage=True">Stats</a></li>
						<!-- Add more list items as needed -->
				</ul>
		</nav>
</div>
<script>
document.addEventListener('DOMContentLoaded', function () {
	var menuContainer = document.querySelector('.floating-menu-container');
	var menuContent = document.querySelector('.floating-menu-content');
	var menuButton = document.querySelector('.floating-hamburger-menu');
	var menuItems = document.querySelectorAll('.floating-menu-content a'); // Get all menu item links

	// Function to toggle the menu's visibility
	function toggleMenu() {
			if (menuContent.style.display === 'block') {
					menuContent.style.display = 'none';
			} else {
					menuContent.style.display = 'block';
			}
	}

	// Mouse events for desktop
	menuContainer.addEventListener('mouseenter', function() {
			menuContent.style.display = 'block';
	});
	menuContainer.addEventListener('mouseleave', function() {
			menuContent.style.display = 'none';
	});

	// Touch event for the menu button
	menuButton.addEventListener('touchstart', function(event) {
			event.preventDefault(); // Prevent default touch action
			toggleMenu();
	}, false);

	// Add touch event listeners to each menu item
	menuItems.forEach(function(menuItem) {
			menuItem.addEventListener('touchstart', function(event) {
					event.stopPropagation(); // Prevent the event from bubbling up to the container
			}, false);
	});
});
</script>
	</body>
</html>
